{% extends "template1.html" %}
{% load ratings %}
{% load pagination_tags %}

{% block js_ready %}
	<script>
		$(document).ready(function () {
			odp.getTags();
			odp.setupSearchInput();

			odp.setupNominate();
		});
	</script>
{% endblock %}

{% block center_container %}
	<div id="title">Nominate Data</div>
	<div id="description">Description and instructions here</div>


	<div id="form_container" class="nomination_form">
		<form action="post/" method="POST">
			{% csrf_token %}
				{% if form.errors %}
				<div class="error_message">The form has errors. Please try again.</div>
			{% endif %}
			<table>
				{{form.as_table}}
				<tr><td>&nbsp;</td><td><input class="button" type="submit" value="submit"/></td></tr>
			</table>
		</form>
	</div>
	<div id="center_header">
      	<div id="n_search">
			<form method="GET" id="n_search_form" >
				<div id="n_search_qs">
					<input type="text" id="nqs" value="Search for nominations" />
				</div>
			</form>
			<div id="n_search_img"></div>
			<div id="nominate_button" class="button">Add a Nomination</div>
		</div>
    </div>

	<div id="count">{{suggestions.count}} Nominations So Far!</div>
{% autopaginate suggestions 6 %}
	<div id="suggestions">
		<ul id="suggestion_list">
			{% for s in suggestions %}
				{% rating_by_request request on s.rating as vote %}
				<li class="resource">
					<div>Suggested By: {{s.suggested_by}}</div>
					<div>{{s}}</div>
					<div>Votes: {{s.rating_votes}}</div>
					{% if not vote %}
						<div><a href="vote/{{s.id}}/">Up</a></div>
					{% else %}
						<div>You Already Voted</div>
					{% endif %}
				</li>
			{% empty %}
				<li class="resource">No nominations yet! What would you like to see added to this site?</li>
			{% endfor %}
		</ul>

	</div>
	<div id="pager">{% paginate %}</div>
{% endblock %}