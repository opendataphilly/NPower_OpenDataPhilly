{% extends "template1.html" %}

{% load thumbnail %}
{% load sorting_tags %}
{% load pagination_tags %}

{% block js_ready %}
	<script>
		$(document).ready(function () {
			odp.getTags();
			odp.setupSearchInput();

			odp.setupSortLinks();
		});
	</script>
{% endblock %}

{% block center_container %}

	{% if tag %}
	<div id="tag_name">{{ tag }}</div>
	{% endif %}
	<div id="results_header">
		{% if results.description %}
			<div id="description"></div>
		{% endif %}
		{% if results %}
		<div id="results_info">
			<div id="count">{{results.count}} Results</div>
			<div id="filter">
				<ul>
					<li><a class="url_image" style="background-image:url(/static/images/icon_application.png);background-position:bottom center;"></a></li>
					<li><a class="url_image" style="background-image:url(/static/images/icon_data.png);background-position:bottom center;"></a></li>
					<li><a class="url_image" style="background-image:url(/static/images/icon_api.png);background-position:bottom center;"></a></li>
					<li class="info_label">FILTER:</li>
				</ul>
			</div>
			<div id="sort">
				<ul>
					<li><a id="sort_rating" class="url_image" style="background-image:url(/static/images/icon_ratings.png);background-position:bottom center;"></a></li>
					<li><a id="sort_name" class="url_image" style="background-image:url(/static/images/icon_alpha.png);background-position:bottom center;"></a></li>
					<li class="info_label">SORT:</li>
				</ul>
			</div>
		</div>
		{% endif %}
	</div>
{% autosort results %}
{% autopaginate results 6 %}
	<div id="results_list">
		<ul>
		{% for r in results %}
			<li class="resource">
				<div id="url_types">
					{% for u in r.get_distinct_url_types %}
						<div class="url_image" style="background-image:url(/static/images/icon_{{u}}.png)" alt="{{u}}"></div>
					{% endfor %}</div>
				<div id="rating_image">
					<div id="rating">
						<input name="star_r{{r.id}}" type="radio" class="star star_r{{r.id}}" disabled="disabled"/>
						<input name="star_r{{r.id}}" type="radio" class="star star_r{{r.id}}" disabled="disabled"/>
						<input name="star_r{{r.id}}" type="radio" class="star star_r{{r.id}}" disabled="disabled"/>
						<input name="star_r{{r.id}}" type="radio" class="star star_r{{r.id}}" disabled="disabled"/>
						<input name="star_r{{r.id}}" type="radio" class="star star_r{{r.id}}" disabled="disabled"/>
						<script type="text/javascript">
							var rating = {{r.rating.score}};
							if (rating != 0) {
								$("input:radio.star_r{{r.id}}")[{{r.rating.score}}-1].checked = 'checked';
							}
						</script>
					</div>
					{% if r.get_first_image %}
						<img src="{% thumbnail r.get_first_image 80x80 autocrop %}" alt="{{r.get_first_image.title}}">
					{% else %}
						<img src="/static/images/results_no_image.gif" alt="No Resource Images">
					{% endif %}
				</div>
				<div id="resource_info">
					<div id="resource_title">{{r}}</div>
					<div id="resource_desc">{{r.short_description|default:"No description available."}}</div>
					<div id="resource_button"><a class="button" href="/opendata/resource/{{r.id}}">VIEW DETAILS</a></div>
				</div>
			</li>
		{% endfor %}
		</ul>
	</div>

	<div id="pager">{% paginate %}</div>

{% endblock %}
